
<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

    <title>Software Integration &#8212; CACAO@HOME Robot  documentation</title>
    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/css/style.css" />
    <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
    <script src="../../_static/jquery.js"></script>
    <script src="../../_static/underscore.js"></script>
    <script src="../../_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="../../_static/doctools.js"></script>
    <script src="../../_static/sphinx_highlight.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="prev" title="Software Integration" href="../index.html" />
   
  <link rel="stylesheet" href="../../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <section id="software-integration">
<span id="id1"></span><h1>Software Integration<a class="headerlink" href="#software-integration" title="Permalink to this heading">¶</a></h1>
<h1 align="center">
  <div>
    <div style="position: relative; padding-bottom: 0%; overflow: hidden; max-width: 100%; height: auto;">
      <iframe width="560" height="315" src="https://www.youtube.com/embed/4Jl3G3RK47c" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
    </div>
  </div>
</h1><section id="overview">
<h2>Overview<a class="headerlink" href="#overview" title="Permalink to this heading">¶</a></h2>
<p>The software integration path was created to integrate all of the subsystems and control the robot’s behavior throughout its work in order for it to be correct, followed by a user story. The behavior can be induced by defining conditions in subsystems.</p>
<p>Software integration uses behavior trees to create each behavior and make decisions about the robot’s behavior. The first draft of the project uses py_tree and py_tree_ros, Python implementations of behavior trees, to manage the behaviors of the robot. More information about py_tree can be found at <a class="reference external" href="https://py-trees.readthedocs.io/en/devel/">https://py-trees.readthedocs.io/en/devel/</a></p>
<p>The developed behavior tree’s structure is divided into three major parts: the root tree, behaviors classes, and subsystem nodes. The root tree was used to create the behavioral flow and call behaviors of the robot. The diagram below (Fig. a) shows the behavior flow of the robot’s first draft. Behaviors classes are used to start subsystem nodes with service and receive status feedback from subsystem nodes. The diagram below (Fig. b) will explain correlation of  behavior class and subsystem node.</p>
<figure class="align-center" id="id2">
<a class="reference internal image-reference" href="../../_images/sysint_a.png"><img alt="behavior_flow" src="../../_images/sysint_a.png" style="width: 480px;" /></a>
<figcaption>
<p><span class="caption-text">Fig. a shows the behavior flow</span><a class="headerlink" href="#id2" title="Permalink to this image">¶</a></p>
</figcaption>
</figure>
<div class="line-block">
<div class="line"><br /></div>
<div class="line"><br /></div>
</div>
<figure class="align-center" id="id3">
<a class="reference internal image-reference" href="../../_images/sysint_b.png"><img alt="behav_nod_relation" src="../../_images/sysint_b.png" style="width: 480px;" /></a>
<figcaption>
<p><span class="caption-text">Fig. b explain correlation of  behavior class and subsystem node</span><a class="headerlink" href="#id3" title="Permalink to this image">¶</a></p>
</figcaption>
</figure>
<div class="line-block">
<div class="line"><br /></div>
</div>
</section>
<section id="installation">
<h2>Installation<a class="headerlink" href="#installation" title="Permalink to this heading">¶</a></h2>
<ul>
<li><p>Install py_tree</p>
<blockquote>
<div><div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>sudo apt-get install ros-foxy-py-trees
</pre></div>
</div>
</div></blockquote>
</li>
<li><p>Install py_tree_ros</p>
<blockquote>
<div><div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>sudo apt-get install ros-foxy-py-trees-ros
</pre></div>
</div>
</div></blockquote>
</li>
<li><p>Test simple behavior tree</p>
<blockquote>
<div><ul>
<li><p>Setup</p>
<blockquote>
<div><div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>git clone https://github.com/MBSE-2022-1/Software-Team.git
<span class="nb">cd</span> sample_ws/
colcon build --symlink-install
</pre></div>
</div>
</div></blockquote>
</li>
<li><p>Run node</p>
<blockquote>
<div><div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>ros2 run sample_integration node.py
</pre></div>
</div>
</div></blockquote>
</li>
<li><p>Run root node</p>
<blockquote>
<div><div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>ros2 run sample_integration root_tree.py
</pre></div>
</div>
</div></blockquote>
</li>
<li><p>Result</p>
<blockquote>
<div><p><a class="reference external" href="https://youtu.be/sjqenN-GnF4">https://youtu.be/sjqenN-GnF4</a></p>
</div></blockquote>
</li>
</ul>
</div></blockquote>
</li>
</ul>
</section>
<section id="example">
<h2>Example<a class="headerlink" href="#example" title="Permalink to this heading">¶</a></h2>
<ul>
<li><p>Setup workspace</p>
<blockquote>
<div><div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>git clone https://github.com/MBSE-2022-1/Software-Team.git
<span class="nb">cd</span> demo_ws/
colcon build --symlink-install
</pre></div>
</div>
</div></blockquote>
</li>
<li><p>Setup hardware</p>
<ol class="arabic">
<li><p>Camera</p>
<blockquote>
<div><div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>ros2 launch realsense2_camera rs_launch.py <span class="se">\</span>
        rgb_camera.profile:<span class="o">=</span>640x480x30 <span class="se">\</span>
        depth_module.profile:<span class="o">=</span>640x480x30 <span class="se">\</span>
        pointcloud.enable:<span class="o">=</span><span class="nb">true</span>
</pre></div>
</div>
</div></blockquote>
</li>
<li><p>Wheel odometry</p>
<blockquote>
<div><div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>sudo chown <span class="nv">$USERNAME</span> /dev/ttyACM0
ros2 run xicro_pkg xicro_node_sub_N_pub_ID_3_stm32.py
ros2 run xicro_pkg nav_msg_publisher.py
</pre></div>
</div>
</div></blockquote>
</li>
</ol>
</li>
<li><p>Run all subsystem node</p>
<blockquote>
<div><div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>ros2 launch integrate_system launch_node.launch.py
</pre></div>
</div>
</div></blockquote>
</li>
<li><p>Run root node</p>
<blockquote>
<div><div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>ros2 run integrate_system root.py
</pre></div>
</div>
</div></blockquote>
</li>
</ul>
</section>
<section id="problem-and-future-plan">
<h2>Problem and future plan<a class="headerlink" href="#problem-and-future-plan" title="Permalink to this heading">¶</a></h2>
<ul>
<li><p>Future Plan</p>
<blockquote>
<div><p>Manage node initialization and destruction; initialize nodes when they’re needed and destroy nodes when they’re finished.</p>
</div></blockquote>
</li>
</ul>
</section>
</section>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="../../index.html">CACAO@HOME Robot</a></h1>








<h3>Navigation</h3>
<p class="caption" role="heading"><span class="caption-text">CACAO'S Robot application</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../fabrication/index.html">Fabrication</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../navigation/index.html">Navigation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../manipulation/index.html">Manipulation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../perception/index.html">Perception</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../appendix/index.html">Appendix</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">CACAO'S Software integration</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">Software Integration</a></li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../../index.html">Documentation overview</a><ul>
  <li><a href="../index.html">Software Integration</a><ul>
      <li>Previous: <a href="../index.html" title="previous chapter">Software Integration</a></li>
  </ul></li>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>document.getElementById('searchbox').style.display = "block"</script>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2022-2022, Cacao Team.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 5.3.0</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.12</a>
      
      |
      <a href="../../_sources/software_integration/docs/software_integration.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>